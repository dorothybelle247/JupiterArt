{"version":3,"sources":["folder-2/new.js"],"names":["activeIndex","limit","disabled","$stage","$controls","canvas","SPIN_FORWARD_CLASS","SPIN_BACKWARD_CLASS","DISABLE_TRANSITIONS_CLASS","SPIN_DUR","appendControls","i","$","append","height","children","last","outerHeight","css","eq","addClass","setIndexes","each","el","attr","duplicateSpinner","$el","parent","html","removeClass","paintFaces","color","getBase64PixelByColor","hex","document","createElement","width","getContext","ctx","fillStyle","fillRect","toDataURL","prepareDom","spin","inc","$activeEls","$nextEls","setTimeout","spinCallback","prependTo","attachListeners","onkeyup","e","keyCode","on","preventDefault","target","toIndex","parseInt","assignEls","init"],"mappings":"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","file":"new.4cad642b.map","sourceRoot":"..","sourcesContent":["let activeIndex = 0\r\nlet limit = 0\r\nlet disabled = false\r\nlet $stage\r\nlet $controls\r\nlet canvas = false\r\n\r\nconst SPIN_FORWARD_CLASS = 'js-spin-fwd'\r\nconst SPIN_BACKWARD_CLASS = 'js-spin-bwd'\r\nconst DISABLE_TRANSITIONS_CLASS = 'js-transitions-disabled'\r\nconst SPIN_DUR = 1000\r\n\r\nconst appendControls = () => {\r\n  for (let i = 0; i < limit; i++) {\r\n    $('.carousel__control').append(`<a href=\"#\" data-index=\"${i}\"></a>`)\r\n  }\r\n  let height = $('.carousel__control').children().last().outerHeight()\r\n  \r\n  $('.carousel__control').css('height', (30 + (limit * height)))\r\n  $controls = $('.carousel__control').children()\r\n  $controls.eq(activeIndex).addClass('active')\r\n}\r\n\r\nconst setIndexes = () => {\r\n    $('.spinner').children().each((i, el) => {\r\n        $(el).attr('data-index', i)\r\n        limit++\r\n    })\r\n}\r\n\r\nconst duplicateSpinner = () => {\r\n    const $el = $('.spinner').parent()\r\n    const html = $('.spinner').parent().html()\r\n    $el.append(html)\r\n    $('.spinner').last().addClass('spinner--right')\r\n    $('.spinner--right').removeClass('spinner--left')\r\n}\r\n\r\nconst paintFaces = () => {\r\n    $('.spinner__face').each((i, el) => {\r\n        const $el = $(el)\r\n        let color = $(el).attr('data-bg')\r\n        $el.children().css('backgroundImage', `url(${getBase64PixelByColor(color)})`)\r\n    })\r\n}\r\n\r\nconst getBase64PixelByColor = (hex) => {\r\n    if (!canvas) {\r\n        canvas = document.createElement('canvas')\r\n        canvas.height = 1\r\n        canvas.width = 1\r\n    }\r\n    if (canvas.getContext) {\r\n        const ctx = canvas.getContext('2d')\r\n        ctx.fillStyle = hex\r\n        ctx.fillRect (0, 0, 1, 1)\r\n        return canvas.toDataURL()\r\n    }\r\n    return false\r\n}\r\n\r\nconst prepareDom = () => {\r\n    setIndexes()\r\n    paintFaces()\r\n    duplicateSpinner()\r\n    appendControls()\r\n}\r\n\r\nconst spin = (inc = 1) => {\r\n    if (disabled) return\r\n    if (!inc) return\r\n    activeIndex += inc\r\n    disabled = true\r\n\r\n    if (activeIndex >= limit) {\r\n        activeIndex = 0\r\n    }\r\n  \r\n    if (activeIndex < 0) {\r\n        activeIndex = (limit - 1)\r\n    }\r\n\r\n    const $activeEls = $('.spinner__face.js-active')\r\n    const $nextEls = $(`.spinner__face[data-index=${activeIndex}]`)\r\n    $nextEls.addClass('js-next')\r\n  \r\n    if (inc > 0) {\r\n      $stage.addClass(SPIN_FORWARD_CLASS)\r\n    } else {\r\n      $stage.addClass(SPIN_BACKWARD_CLASS)\r\n    }\r\n    \r\n    $controls.removeClass('active')\r\n    $controls.eq(activeIndex).addClass('active')\r\n  \r\n    setTimeout(() => {\r\n        spinCallback(inc)\r\n    }, SPIN_DUR, inc)\r\n}\r\n\r\nconst spinCallback = (inc) => {\r\n    \r\n    $('.js-active').removeClass('js-active')\r\n    $('.js-next').removeClass('js-next').addClass('js-active')\r\n    $stage\r\n        .addClass(DISABLE_TRANSITIONS_CLASS)\r\n        .removeClass(SPIN_FORWARD_CLASS)\r\n        .removeClass(SPIN_BACKWARD_CLASS)\r\n  \r\n    $('.js-active').each((i, el) => {\r\n        const $el = $(el)\r\n        $el.prependTo($el.parent())\r\n    })\r\n    setTimeout(() => {\r\n        $stage.removeClass(DISABLE_TRANSITIONS_CLASS)\r\n        disabled = false\r\n    }, 100)\r\n\r\n}\r\n\r\nconst attachListeners = () => {\r\n  \r\n    document.onkeyup = (e) => {\r\n        switch (e.keyCode) {\r\n            case 38:\r\n                spin(-1)\r\n                break\r\n            case 40:\r\n                spin(1)\r\n                break\r\n            }\r\n    }\r\n \r\n    $controls.on('click', (e) => {\r\n      e.preventDefault()\r\n      if (disabled) return\r\n      const $el = $(e.target)\r\n      const toIndex = parseInt($el.attr('data-index'), 10)\r\n      spin(toIndex - activeIndex)\r\n      \r\n    })\r\n}\r\n\r\nconst assignEls = () => {\r\n    $stage = $('.carousel__stage')\r\n}\r\n\r\nconst init = () => {\r\n    assignEls()\r\n    prepareDom()\r\n    attachListeners()\r\n}\r\n\r\n\r\n$(() => {\r\n    init();\r\n});"]}